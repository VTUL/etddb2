<%= form_for @etd do |f| %>
  <p>
    <%= f.label(:degree_id, "Degree") %><br />
    <%= f.collection_select(:degree_id, Degree.where(:retired => false), :id, :name) %>
  </p>
  <p>
    <%= f.label(:document_type_id, "Document Type") %><br />
    <%= f.collection_select(:document_type_id, DocumentType.where(:retired => false), :id, :name) %>
  </p>
  <p>
    <%= f.label(:department) %><br />
    <%#= f.options_from_collection_for_select(Department.all, :id, :name) %>
    Discuss solutions. Luckily, not required to create an ETD.
  </p>
  <p>
    <%= f.label(:ddate, "Defense Date") %><br />
    <%= f.date_select(:ddate, {:end_year => Time.now.year}) %>
  </p>
  <p>
    <%= f.label(:title) %><br />
    <%= f.text_field(:title) %>
  </p>
  <p>
    <%= f.label(:abstract) %><br />
    <%= f.text_area(:abstract) %>
  </p>
  <p>
    <%= f.label(:keywords) %><br />
    <%= f.text_area(:keywords, :rows => 5) %>
  </p>
  <p>
    <%= f.label(:availability_id, "Availability") %>
    <table>
      <% for avail in Availability.where(:retired => false) do %>
        <tr>
          <td valign='top'><%= f.radio_button(:availability_id, avail.id) %></td>
          <td valign='top' align='right'><%= avail.name %>:</td>
          <td valign='top'><%= avail.description %></td>
        </tr>
      <% end %>
    </table>
  </p>
  <p>
    <%= CopyrightStatement.where(:retired => false).last.statement %><br />
    <%= f.check_box(:copyright_statement_id, {}, CopyrightStatement.where(:retired => false).last.id, nil)%>
    <%= f.label(:copyright_statement_id, "I have read the above and agreed to it.")%>
  </p>
  <p>
    <%= PrivacyStatement.where(:retired => false).last.statement %><br />
    <%= f.check_box(:privacy_statement_id, {}, CopyrightStatement.where(:retired => false).last.id, nil)%>
    <%= f.label(:privacy_statement_id, "I have read the above and agreed to it.")%>
  </p>
  <% urnvalue = "etd-#{Time.now.month}#{Time.now.day}#{Time.now.year}-#{Time.now.hour}#{Time.now.min}#{Time.now.sec}" %>
  <% base_url = "http://developer.tower.lib.vt.edu:3000/theses/available" %>
  <%= f.hidden_field(:urn, {:value=>"#{urnvalue}"}) %>
  <%= f.hidden_field(:url, {:value=>"#{base_url}/"+"#{urnvalue}"+"/"}) %>
  <%= f.hidden_field(:bound, {:value=>false}) %>
  <%= f.submit %>
<% end %>
